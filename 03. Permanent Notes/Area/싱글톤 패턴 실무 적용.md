---
tags:
  - ê°ì²´ì§€í–¥
  - ë””ìì¸íŒ¨í„´
  - ì‹¤ë¬´
  - ì•ˆí‹°íŒ¨í„´
  - Spring
  - ì‹±ê¸€í†¤
aliases:
  - Singleton Practical Application
  - ì‹±ê¸€í†¤ ì‹¤ë¬´ í™œìš©
created: 2025-06-05
title: ì‹±ê¸€í†¤ íŒ¨í„´ ì‹¤ë¬´ ì ìš©
note-type: COMMON
completed: true
---

## ë‚´ìš©(Content)

### ê°œìš”

ì‹±ê¸€í†¤ íŒ¨í„´ì€ ì‹¤ë¬´ì—ì„œ ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ë˜ì§€ë§Œ, ë™ì‹œì— "ì•ˆí‹°íŒ¨í„´"ìœ¼ë¡œ ë¹„íŒë°›ê¸°ë„ í•œë‹¤. ì´ ë…¸íŠ¸ì—ì„œëŠ” ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ë¶„ì„í•˜ê³ , ë¬¸ì œì ê³¼ í˜„ëŒ€ì  ëŒ€ì•ˆì„ ê· í˜•ì¡íŒ ê´€ì ì—ì„œ ì‚´í´ë³¸ë‹¤.

### ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ ë¶„ì„

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê´€ë¦¬

```java
public class DatabaseManager {
    private static volatile DatabaseManager instance;
    private Connection connection;
    
    private DatabaseManager() {
        // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì´ˆê¸°í™”
        this.connection = DriverManager.getConnection(
            "jdbc:postgresql://localhost:5432/mydb", "user", "password");
    }
    
    public static DatabaseManager getInstance() {
        if (instance == null) {
            synchronized (DatabaseManager.class) {
                if (instance == null) {
                    instance = new DatabaseManager();
                }
            }
        }
        return instance;
    }
    
    public Connection getConnection() {
        return connection;
    }
}
```

**ì‚¬ìš© ì´ìœ :**
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì€ ë¹„ìš©ì´ í° ë¦¬ì†ŒìŠ¤
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ í•˜ë‚˜ì˜ ì—°ê²° í’€ ê³µìœ  í•„ìš”
- ì—°ê²° ìƒíƒœ ì¼ê´€ì„± ë³´ì¥

**ë¬¸ì œì :**
- ì—°ê²° ì‹¤íŒ¨ ì‹œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜í–¥
- í…ŒìŠ¤íŠ¸ ì‹œ ì‹¤ì œ DB ì—°ê²° í•„ìš”
- í™•ì¥ì„± ì œí•œ (ì—¬ëŸ¬ DB ì§€ì› ì–´ë ¤ì›€)

>[!warning] ì‹¤ë¬´ì—ì„œì˜ ë¬¸ì œ
>ë‹¨ì¼ Connection ê°ì²´ë¥¼ ê³µìœ í•˜ëŠ” ê²ƒì€ ë§¤ìš° ìœ„í—˜í•˜ë‹¤. ì‹¤ì œë¡œëŠ” Connection Poolì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

#### 2. ë¡œê¹… ì‹œìŠ¤í…œ

```java
public class Logger {
    private static final Logger INSTANCE = new Logger();
    private PrintWriter writer;
    
    private Logger() {
        try {
            writer = new PrintWriter(new FileWriter("app.log", true));
        } catch (IOException e) {
            throw new RuntimeException("ë¡œê·¸ íŒŒì¼ ì´ˆê¸°í™” ì‹¤íŒ¨", e);
        }
    }
    
    public static Logger getInstance() {
        return INSTANCE;
    }
    
    public synchronized void log(String message) {
        writer.println(LocalDateTime.now() + ": " + message);
        writer.flush();
    }
}
```

**ì‚¬ìš© ì´ìœ :**
- ë¡œê·¸ íŒŒì¼ ë™ì‹œ ì ‘ê·¼ ë°©ì§€
- ì „ì—­ì—ì„œ ì¼ê´€ëœ ë¡œê¹… ì¸í„°í˜ì´ìŠ¤ ì œê³µ
- íŒŒì¼ í•¸ë“¤ ë¦¬ì†ŒìŠ¤ ì ˆì•½

**ì¥ì :**
- ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ ì‚¬ìš©ë²•
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- Thread-safe ë¡œê¹… ë³´ì¥

>[!info] ì‹¤ë¬´ ê°œì„  ë°©ì•ˆ
>í˜„ëŒ€ì ì¸ ë¡œê¹… í”„ë ˆì„ì›Œí¬(Logback, Log4j2)ëŠ” ì´ë¯¸ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ, ì§ì ‘ êµ¬í˜„ë³´ë‹¤ëŠ” ê¸°ì¡´ í”„ë ˆì„ì›Œí¬ í™œìš©ì„ ê¶Œì¥í•œë‹¤.

#### 3. ì„¤ì • ê´€ë¦¬

```java
public class ConfigurationManager {
    private static ConfigurationManager instance;
    private Properties properties;
    
    private ConfigurationManager() {
        properties = new Properties();
        loadConfiguration();
    }
    
    public static synchronized ConfigurationManager getInstance() {
        if (instance == null) {
            instance = new ConfigurationManager();
        }
        return instance;
    }
    
    private void loadConfiguration() {
        try (InputStream input = getClass().getResourceAsStream("/config.properties")) {
            properties.load(input);
        } catch (IOException e) {
            throw new RuntimeException("ì„¤ì • íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨", e);
        }
    }
    
    public String getProperty(String key) {
        return properties.getProperty(key);
    }
}
```

**ì‚¬ìš© ì´ìœ :**
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ì¼ê´€ëœ ì„¤ì • ê°’ ì‚¬ìš©
- ì„¤ì • íŒŒì¼ ì¤‘ë³µ ë¡œë”© ë°©ì§€
- ëŸ°íƒ€ì„ ì„¤ì • ë³€ê²½ ì‹œ ì „ì—­ ë°˜ì˜

**ì‹¤ë¬´ì  ê³ ë ¤ì‚¬í•­:**
- í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬ (dev, staging, prod)
- ì„¤ì • ê°’ ë³€ê²½ ì‹œ ì¬ì‹œì‘ ì—†ì´ ë°˜ì˜
- ë¯¼ê°í•œ ì •ë³´ ì•”í˜¸í™”

#### 4. TestContainer ìƒëª…ì£¼ê¸° ê´€ë¦¬

ê¸°ì¡´ [[03. Permanent Notes/Area/Junit5ì™€ TestContainerë¥¼ ì´ìš©í•œ ìƒëª…ì£¼ê¸° ê´€ë¦¬]] ë…¸íŠ¸ì—ì„œ í™•ì¸ëœ ì‹¤ì œ í™œìš© ì‚¬ë¡€:

```java
public abstract class AbstractSingletonContainerTest {
    private static JdbcDatabaseContainer<?> databaseContainer;

    static {
        databaseContainer = new PostgreSQLContainer<>("postgres:16.1");
        databaseContainer.start();
    }
    
    // Bill Pugh Solution ì ìš©í•œ ê°œì„ ëœ ë²„ì „
    private static class ContainerHelper {
        private static final JdbcDatabaseContainer<?> INSTANCE = 
            new PostgreSQLContainer<>("postgres:16.1")
                .withDatabaseName("testdb")
                .withUsername("test")
                .withPassword("test");
        
        static {
            INSTANCE.start();
        }
    }
    
    protected static JdbcDatabaseContainer<?> getContainer() {
        return ContainerHelper.INSTANCE;
    }
}
```

**ì‹¤ë¬´ì  ì´ì :**
- ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì—ì„œ ë™ì¼í•œ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ ê³µìœ 
- CI/CD í™˜ê²½ì—ì„œ ë©”ëª¨ë¦¬ ë° ì‹œê°„ ì ˆì•½
- ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ ì•ˆì „ì„± ë³´ì¥

**ì„±ëŠ¥ ê°œì„  íš¨ê³¼:**
```java
// ì‹±ê¸€í†¤ ì ìš© ì „: ê° í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë§ˆë‹¤ ì»¨í…Œì´ë„ˆ ìƒì„±
// í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ 5ê°œ Ã— ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œê°„ 30ì´ˆ = 150ì´ˆ

// ì‹±ê¸€í†¤ ì ìš© í›„: í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆ ê³µìœ 
// ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œê°„ 30ì´ˆ + í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ = ì•½ 35ì´ˆ
// ì•½ 76% ì‹œê°„ ë‹¨ì¶•
```

>[!tip] ì‹¤ë¬´ íŒ
>TestContainerëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ë§¤ìš° ìœ ìš©í•œ ëŒ€í‘œì ì¸ ì‚¬ë¡€ì´ë‹¤. ë¦¬ì†ŒìŠ¤ ì ˆì•½ê³¼ í…ŒìŠ¤íŠ¸ ì†ë„ í–¥ìƒì— í° ë„ì›€ì´ ëœë‹¤.

### ì•ˆí‹°íŒ¨í„´ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” ì´ìœ 

#### 1. SOLID ì›ì¹™ê³¼ì˜ ì¶©ëŒ

##### Single Responsibility Principle (SRP) ìœ„ë°˜
```java
public class DatabaseSingleton {
    // ì±…ì„ 1: ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê´€ë¦¬
    private static DatabaseSingleton instance;
    
    // ì±…ì„ 2: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê´€ë¦¬
    private Connection connection;
    
    // ì±…ì„ 3: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    public User findUser(String id) { /* ... */ }
}
```

**ë¬¸ì œ**: í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ì—¬ëŸ¬ ì±…ì„ì„ ê°€ì§

**í•´ê²° ë°©ì•ˆ:**
```java
// ì±…ì„ ë¶„ë¦¬
public class UserRepository {  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ
    private final DatabaseService databaseService;
    
    public UserRepository(DatabaseService databaseService) {
        this.databaseService = databaseService;
    }
}

public class DatabaseService {  // ì—°ê²° ê´€ë¦¬ë§Œ
    // ì—°ê²° ê´€ë¦¬ ë¡œì§
}
```

##### Dependency Inversion Principle (DIP) ìœ„ë°˜
```java
public class UserService {
    public User getUser(String id) {
        // êµ¬ì²´ì ì¸ êµ¬í˜„ì— ì§ì ‘ ì˜ì¡´
        DatabaseSingleton db = DatabaseSingleton.getInstance();
        return db.findUser(id);
    }
}
```

**ë¬¸ì œ**: ê³ ìˆ˜ì¤€ ëª¨ë“ˆì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆì— ì§ì ‘ ì˜ì¡´

**í•´ê²° ë°©ì•ˆ:**
```java
public class UserService {
    private final UserRepository userRepository;  // ì¶”ìƒí™”ì— ì˜ì¡´
    
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    
    public User getUser(String id) {
        return userRepository.findUser(id);
    }
}
```

#### 2. í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€

```java
public class UserServiceTest {
    @Test
    public void testGetUser() {
        // ë¬¸ì œ: ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´
        UserService service = new UserService();
        User user = service.getUser("123");
        
        // Mock ê°ì²´ ì‚¬ìš© ë¶ˆê°€ëŠ¥
        // í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ì–´ë ¤ì›€
        // í…ŒìŠ¤íŠ¸ ìˆœì„œ ì˜ì¡´ì„± ë°œìƒ
    }
}
```

**ì£¼ìš” ë¬¸ì œì :**
- Mock ê°ì²´ ì£¼ì… ë¶ˆê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ ê°„ ìƒíƒœ ê³µìœ ë¡œ ì¸í•œ ë¶€ì‘ìš©
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ì›ì¹™ ìœ„ë°˜

**ê°œì„ ëœ í…ŒìŠ¤íŠ¸:**
```java
public class UserServiceTest {
    @Test
    public void testGetUser() {
        // Mock ê°ì²´ ìƒì„±
        UserRepository mockRepository = Mockito.mock(UserRepository.class);
        when(mockRepository.findUser("123")).thenReturn(new User("123", "John"));
        
        // ì˜ì¡´ì„± ì£¼ì…
        UserService service = new UserService(mockRepository);
        User user = service.getUser("123");
        
        assertEquals("John", user.getName());
    }
}
```

#### 3. ì˜ì¡´ì„± ì€ë‹‰ (Hidden Dependencies)

```java
public class OrderService {
    public void processOrder(Order order) {
        // ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±: Logger, ConfigManager
        Logger.getInstance().log("ì£¼ë¬¸ ì²˜ë¦¬ ì‹œì‘");
        String apiKey = ConfigurationManager.getInstance().getProperty("api.key");
        // ...
    }
}
```

**ë¬¸ì œì :**
- ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ë§Œìœ¼ë¡œ ì˜ì¡´ì„± íŒŒì•… ë¶ˆê°€ëŠ¥
- ì½”ë“œ ë¶„ì„ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
- ì˜ì¡´ì„± ì£¼ì… í”„ë ˆì„ì›Œí¬ì™€ ì¶©ëŒ

**ê°œì„  ë°©ì•ˆ:**
```java
public class OrderService {
    private final Logger logger;
    private final ConfigurationManager configManager;
    
    // ì˜ì¡´ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„
    public OrderService(Logger logger, ConfigurationManager configManager) {
        this.logger = logger;
        this.configManager = configManager;
    }
    
    public void processOrder(Order order) {
        logger.log("ì£¼ë¬¸ ì²˜ë¦¬ ì‹œì‘");
        String apiKey = configManager.getProperty("api.key");
        // ...
    }
}
```

#### 4. ì „ì—­ ìƒíƒœì˜ ìœ„í—˜ì„±

```java
public class CounterSingleton {
    private static CounterSingleton instance = new CounterSingleton();
    private int count = 0;
    
    public void increment() { count++; }
    public int getCount() { return count; }
}

// ë¬¸ì œ ìƒí™©
CounterSingleton.getInstance().increment(); // count = 1
// ë‹¤ë¥¸ ê³³ì—ì„œ
CounterSingleton.getInstance().increment(); // count = 2
// ì˜ˆìƒì¹˜ ëª»í•œ ìƒíƒœ ë³€ê²½
```

>[!danger] ì „ì—­ ìƒíƒœì˜ ìœ„í—˜
>ì „ì—­ ìƒíƒœëŠ” ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ìš´ ë¶€ì‘ìš©ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤. íŠ¹íˆ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œëŠ” ë”ìš± ìœ„í—˜í•˜ë‹¤.

### í˜„ëŒ€ì  ëŒ€ì•ˆ ë° í•´ê²° ë°©ì•ˆ

#### 1. Dependency Injection (ì˜ì¡´ì„± ì£¼ì…)

```java
// ì¸í„°í˜ì´ìŠ¤ ì •ì˜
public interface DatabaseService {
    User findUser(String id);
}

// êµ¬í˜„ì²´
public class PostgreSQLDatabaseService implements DatabaseService {
    private final Connection connection;
    
    public PostgreSQLDatabaseService(Connection connection) {
        this.connection = connection;
    }
    
    @Override
    public User findUser(String id) { /* ... */ }
}

// ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
public class UserService {
    private final DatabaseService databaseService;
    
    // ìƒì„±ì ì£¼ì…
    public UserService(DatabaseService databaseService) {
        this.databaseService = databaseService;
    }
    
    public User getUser(String id) {
        return databaseService.findUser(id);
    }
}
```

**ì¥ì :**
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (Mock ì£¼ì… ê°€ëŠ¥)
- ì˜ì¡´ì„± ëª…ì‹œì  í‘œí˜„
- ìœ ì—°í•œ êµ¬í˜„ì²´ êµì²´

#### 2. Spring Frameworkì˜ Bean ê´€ë¦¬

```java
@Configuration
public class DatabaseConfig {
    
    @Bean
    @Scope("singleton")  // Springì˜ ì‹±ê¸€í†¤ ê´€ë¦¬
    public DatabaseService databaseService() {
        return new PostgreSQLDatabaseService(createConnection());
    }
}

@Service
public class UserService {
    private final DatabaseService databaseService;
    
    // Springì´ ìë™ìœ¼ë¡œ ì£¼ì…
    public UserService(DatabaseService databaseService) {
        this.databaseService = databaseService;
    }
}
```

**Spring ì‹±ê¸€í†¤ì˜ ì¥ì :**
- ì»¨í…Œì´ë„ˆê°€ ìƒëª…ì£¼ê¸° ê´€ë¦¬
- í”„ë¡ì‹œë¥¼ í†µí•œ AOP ì§€ì›
- í…ŒìŠ¤íŠ¸ ì‹œ ì‰¬ìš´ Mock êµì²´

>[!info] Spring vs ì „í†µì  ì‹±ê¸€í†¤
>Springì˜ ì‹±ê¸€í†¤ì€ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œë§Œ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ì¥í•˜ë©°, í…ŒìŠ¤íŠ¸ ì‹œ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤.

#### 3. Factory Pattern í™œìš©

```java
public class DatabaseServiceFactory {
    private static DatabaseService instance;
    
    public static DatabaseService getInstance() {
        if (instance == null) {
            synchronized (DatabaseServiceFactory.class) {
                if (instance == null) {
                    instance = createDatabaseService();
                }
            }
        }
        return instance;
    }
    
    private static DatabaseService createDatabaseService() {
        // í™˜ê²½ì— ë”°ë¥¸ ë‹¤ë¥¸ êµ¬í˜„ì²´ ë°˜í™˜
        String dbType = System.getProperty("db.type", "postgresql");
        switch (dbType) {
            case "mysql": return new MySQLDatabaseService();
            case "postgresql": return new PostgreSQLDatabaseService();
            default: throw new IllegalArgumentException("ì§€ì›í•˜ì§€ ì•ŠëŠ” DB íƒ€ì…: " + dbType);
        }
    }
}
```

**ì¥ì :**
- í™˜ê²½ë³„ ë‹¤ë¥¸ êµ¬í˜„ì²´ ì œê³µ ê°€ëŠ¥
- ì„¤ì • ê¸°ë°˜ ê°ì²´ ìƒì„±
- ì‹±ê¸€í†¤ì˜ ì´ì  ìœ ì§€

#### 4. Service Locator Pattern

```java
public class ServiceLocator {
    private static final Map<Class<?>, Object> services = new ConcurrentHashMap<>();
    
    @SuppressWarnings("unchecked")
    public static <T> T getService(Class<T> serviceClass) {
        return (T) services.get(serviceClass);
    }
    
    public static <T> void registerService(Class<T> serviceClass, T implementation) {
        services.put(serviceClass, implementation);
    }
}

// ì‚¬ìš©ë²•
ServiceLocator.registerService(DatabaseService.class, new PostgreSQLDatabaseService());
DatabaseService db = ServiceLocator.getService(DatabaseService.class);
```

**íŠ¹ì§•:**
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ì„œë¹„ìŠ¤ ê´€ë¦¬
- ëŸ°íƒ€ì„ ì„œë¹„ìŠ¤ ë“±ë¡/í•´ì œ ê°€ëŠ¥
- ì˜ì¡´ì„± ì£¼ì…ì˜ ëŒ€ì•ˆ

>[!warning] Service Locator ì£¼ì˜ì‚¬í•­
>Service Locatorë„ ì˜ì¡´ì„±ì„ ì€ë‹‰í•˜ëŠ” ë¬¸ì œê°€ ìˆì–´, í˜„ëŒ€ì ì¸ DI í”„ë ˆì„ì›Œí¬ê°€ ë” ì„ í˜¸ëœë‹¤.

### ê· í˜•ì¡íŒ ê´€ì : ì–¸ì œ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•  ê²ƒì¸ê°€?

#### ì ì ˆí•œ ì‚¬ìš© ì‚¬ë¡€

1. **ìƒíƒœê°€ ì—†ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤**
```java
public enum MathUtils {
    INSTANCE;
    
    public double calculateDistance(Point a, Point b) {
        return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
    }
    
    public double calculateArea(double radius) {
        return Math.PI * radius * radius;
    }
}

// ì‚¬ìš©ë²•
double distance = MathUtils.INSTANCE.calculateDistance(p1, p2);
```

2. **ë¦¬ì†ŒìŠ¤ ì§‘ì•½ì ì¸ ê°ì²´ (ìºì‹œ, ì—°ê²° í’€)**
```java
public class ConnectionPoolSingleton {
    private static final ConnectionPoolSingleton INSTANCE = new ConnectionPoolSingleton();
    private final HikariDataSource dataSource;
    
    private ConnectionPoolSingleton() {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:postgresql://localhost:5432/mydb");
        config.setUsername("user");
        config.setPassword("password");
        config.setMaximumPoolSize(20);
        config.setMinimumIdle(5);
        this.dataSource = new HikariDataSource(config);
    }
    
    public static ConnectionPoolSingleton getInstance() {
        return INSTANCE;
    }
    
    public Connection getConnection() throws SQLException {
        return dataSource.getConnection();
    }
}
```

3. **í…ŒìŠ¤íŠ¸ í™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**
```java
// TestContainerì™€ ê°™ì€ í…ŒìŠ¤íŠ¸ ë¦¬ì†ŒìŠ¤
public enum TestDatabaseContainer {
    INSTANCE;
    
    private final PostgreSQLContainer<?> container;
    
    TestDatabaseContainer() {
        container = new PostgreSQLContainer<>("postgres:13")
            .withDatabaseName("testdb")
            .withUsername("test")
            .withPassword("test")
            .withInitScript("init.sql");
        container.start();
        
        // JVM ì¢…ë£Œ ì‹œ ì»¨í…Œì´ë„ˆ ì •ë¦¬
        Runtime.getRuntime().addShutdownHook(new Thread(container::stop));
    }
    
    public String getJdbcUrl() {
        return container.getJdbcUrl();
    }
    
    public String getUsername() {
        return container.getUsername();
    }
    
    public String getPassword() {
        return container.getPassword();
    }
}
```

#### í”¼í•´ì•¼ í•  ì‚¬ìš© ì‚¬ë¡€

1. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ëŠ” ì„œë¹„ìŠ¤**
```java
// âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
public class OrderServiceSingleton {
    private static OrderServiceSingleton instance;
    
    public void processOrder(Order order) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì‹±ê¸€í†¤ì— í¬í•¨
        validateOrder(order);
        calculateTotal(order);
        saveOrder(order);
    }
}
```

2. **ìƒíƒœë¥¼ ê°€ì§€ëŠ” ê°ì²´**
```java
// âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
public class UserSessionSingleton {
    private static UserSessionSingleton instance;
    private User currentUser;  // ìƒíƒœë¥¼ ê°€ì§
    
    public void setCurrentUser(User user) {
        this.currentUser = user;  // ì „ì—­ ìƒíƒœ ë³€ê²½
    }
}
```

3. **ìì£¼ ë³€ê²½ë˜ëŠ” ì„¤ì •**
```java
// âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
public class DynamicConfigSingleton {
    private Map<String, String> config = new HashMap<>();
    
    public void updateConfig(String key, String value) {
        config.put(key, value);  // ëŸ°íƒ€ì„ ìƒíƒœ ë³€ê²½
    }
}
```

4. **í…ŒìŠ¤íŠ¸ì—ì„œ ë‹¤ë¥¸ êµ¬í˜„ì²´ê°€ í•„ìš”í•œ ê²½ìš°**
```java
// âŒ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ íŒ¨í„´
public class EmailServiceSingleton {
    public void sendEmail(String to, String message) {
        // ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ (í…ŒìŠ¤íŠ¸ ì‹œ ë¬¸ì œ)
        SmtpClient.send(to, message);
    }
}
```

### ì‹¤ë¬´ ì ìš© ê°€ì´ë“œë¼ì¸

#### ìƒí™©ë³„ ì„ íƒ ê¸°ì¤€

| ìƒí™© | ê¶Œì¥ ë°©ë²• | ì´ìœ  | ì˜ˆì‹œ |
|------|-----------|------|------|
| **ë ˆê±°ì‹œ ì‹œìŠ¤í…œ** | ì‹±ê¸€í†¤ íŒ¨í„´ ìœ ì§€ | ê¸°ì¡´ ì½”ë“œ ì•ˆì •ì„±, ì ì§„ì  ê°œì„  | ê¸°ì¡´ Logger, ConfigManager |
| **ìƒˆë¡œìš´ í”„ë¡œì íŠ¸** | DI í”„ë ˆì„ì›Œí¬ ì‚¬ìš© | í…ŒìŠ¤íŠ¸ ìš©ì´ì„±, ìœ ì§€ë³´ìˆ˜ì„± | Spring Boot, Guice |
| **ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œ** | Enum ì‹±ê¸€í†¤ | ì•ˆì „ì„±, ë‹¨ìˆœì„± | ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ |
| **í…ŒìŠ¤íŠ¸ ë¦¬ì†ŒìŠ¤** | Bill Pugh Solution | ì„±ëŠ¥, Thread-safety | TestContainer |
| **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤** | Spring Bean | ì»¨í…Œì´ë„ˆ ê´€ë¦¬, AOP ì§€ì› | @Service, @Component |

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

1. **ì ì§„ì  ê°œì„ **
```java
// 1ë‹¨ê³„: ì¸í„°í˜ì´ìŠ¤ ë„ì…
public interface LoggerService {
    void log(String message);
}

// 2ë‹¨ê³„: ê¸°ì¡´ ì‹±ê¸€í†¤ì„ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¡œ ë³€ê²½
public class LoggerSingleton implements LoggerService {
    // ê¸°ì¡´ ì½”ë“œ ìœ ì§€
}

// 3ë‹¨ê³„: DI ê¸°ë°˜ êµ¬í˜„ì²´ ì¶”ê°€
@Service
public class SpringLoggerService implements LoggerService {
    // ìƒˆë¡œìš´ êµ¬í˜„
}
```

2. **í…ŒìŠ¤íŠ¸ ê°œì„ **
```java
// ê¸°ì¡´: í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ ì½”ë“œ
public class OrderService {
    public void processOrder(Order order) {
        Logger.getInstance().log("Processing order: " + order.getId());
    }
}

// ê°œì„ : í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ
public class OrderService {
    private final LoggerService logger;
    
    public OrderService(LoggerService logger) {
        this.logger = logger;
    }
    
    public void processOrder(Order order) {
        logger.log("Processing order: " + order.getId());
    }
}
```

### ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­

#### í•µì‹¬ ì›ì¹™

1. **ìƒí™©ì— ë§ëŠ” ì„ íƒ**
   - ì‹±ê¸€í†¤ì´ ì ì ˆí•œ ìƒí™©ê³¼ ë¶€ì ì ˆí•œ ìƒí™©ì„ ëª…í™•íˆ êµ¬ë¶„
   - ë¬´ì¡°ê±´ì ì¸ ì‚¬ìš©ì´ë‚˜ ê¸ˆì§€ë³´ë‹¤ëŠ” ìƒí™©ë³„ íŒë‹¨

2. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ìš°ì„ **
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ìš´ ì„¤ê³„ëŠ” í”¼í•˜ê¸°
   - Mock ê°ì²´ ì£¼ì…ì´ ê°€ëŠ¥í•œ êµ¬ì¡° ì„ í˜¸

3. **ì˜ì¡´ì„± ëª…ì‹œí™”**
   - ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±ë³´ë‹¤ëŠ” ëª…ì‹œì  ì˜ì¡´ì„±
   - ìƒì„±ì ì£¼ì…ì„ í†µí•œ ì˜ì¡´ì„± í‘œí˜„

4. **í”„ë ˆì„ì›Œí¬ í™œìš©**
   - ì–¸ì–´ì™€ í”„ë ˆì„ì›Œí¬ì˜ ë‚´ì¥ ê¸°ëŠ¥ ìµœëŒ€í•œ í™œìš©
   - Spring Bean, Guice ë“± ê²€ì¦ëœ DI ì»¨í…Œì´ë„ˆ ì‚¬ìš©

>[!tip] ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­
>- **ìƒˆ í”„ë¡œì íŠ¸**: DI í”„ë ˆì„ì›Œí¬ ì‚¬ìš©
>- **ë ˆê±°ì‹œ ê°œì„ **: ì ì§„ì  ë¦¬íŒ©í† ë§
>- **ë¼ì´ë¸ŒëŸ¬ë¦¬**: Enum ì‹±ê¸€í†¤
>- **í…ŒìŠ¤íŠ¸ ë¦¬ì†ŒìŠ¤**: Bill Pugh Solution

#### ìµœì¢… ê²°ë¡ 

ì‹±ê¸€í†¤ íŒ¨í„´ì€ "ì•ˆí‹°íŒ¨í„´"ì´ë¼ê¸°ë³´ë‹¤ëŠ” **ì ì ˆí•œ ìƒí™©ì—ì„œ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” íŒ¨í„´**ì´ë‹¤. í˜„ëŒ€ ê°œë°œ í™˜ê²½ì—ì„œëŠ” DI í”„ë ˆì„ì›Œí¬ê°€ ë” ë‚˜ì€ ëŒ€ì•ˆì„ ì œê³µí•˜ì§€ë§Œ, íŠ¹ì • ìƒí™©ì—ì„œëŠ” ì—¬ì „íˆ ìœ ìš©í•œ ë„êµ¬ë¡œ í™œìš©ë  ìˆ˜ ìˆë‹¤.
**ì„±ê³µì ì¸ ì‹±ê¸€í†¤ ì‚¬ìš©ì„ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì •ë§ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ í•„ìš”í•œê°€?
- [ ] ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠëŠ”ê°€?
- [ ] í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•œê°€?
- [ ] ì˜ì¡´ì„±ì´ ëª…ì‹œì ì¸ê°€?
- [ ] Thread-safeí•œê°€?

## ì§ˆë¬¸ & í™•ì¥

### ì‹¬í™” í•™ìŠµ ì§ˆë¬¸

1. **ì‹¤ë¬´ ì ìš©**
   - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ì˜ í•œê³„ëŠ” ë¬´ì—‡ì¸ê°€?
   - í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ ì „ëµì€ ë¬´ì—‡ì¸ê°€?

2. **ì„±ëŠ¥ ìµœì í™”**
   - ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë³‘ëª© ì§€ì ì€ ì–´ë””ì¸ê°€?
   - ìºì‹œì™€ ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ì¡°í•© ì‹œ ê³ ë ¤ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€?

3. **í…ŒìŠ¤íŠ¸ ì „ëµ**
   - ë ˆê±°ì‹œ ì‹±ê¸€í†¤ ì½”ë“œì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?
   - í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œ ì‹±ê¸€í†¤ ìƒíƒœ ê´€ë¦¬ ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?

### ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµ

- [[03. Permanent Notes/Area/ì‹±ê¸€í†¤ íŒ¨í„´ ê¸°ë³¸ ê°œë…|ì‹±ê¸€í†¤ íŒ¨í„´ ê¸°ë³¸ ê°œë…]] - ê¸°ë³¸ ê°œë…ê³¼ ì›ë¦¬
- [[03. Permanent Notes/Area/ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„ ë°©ë²•|ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„ ë°©ë²•]] - 7ê°€ì§€ êµ¬í˜„ ë°©ì‹ ë¹„êµ
- [[03. Permanent Notes/Area/ì‹±ê¸€í†¤ íŒ¨í„´ Thread-Safety|ì‹±ê¸€í†¤ íŒ¨í„´ Thread-Safety]] - ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ ì´ìŠˆ

## ì¶œì²˜

- Martin Fowler. "Inversion of Control Containers and the Dependency Injection pattern" (2004)
- Joshua Bloch. "Effective Java" 3rd Edition (2017) - Item 3
- Spring Framework Documentation: "Bean Scopes"

## ì—°ê²° ë…¸íŠ¸

### ìƒìœ„ ê°œë…
- [[02. MOC/ğŸ›ï¸ ì‹±ê¸€í†¤ íŒ¨í„´|ğŸ›ï¸ ì‹±ê¸€í†¤ íŒ¨í„´]] - ì „ì²´ ì‹±ê¸€í†¤ íŒ¨í„´ MOC

### ê´€ë ¨ ê°œë…
- [[03. Permanent Notes/Area/SOLIDë€ ë¬´ì—‡ì¸ê°€|SOLIDë€ ë¬´ì—‡ì¸ê°€]] - ì„¤ê³„ ì›ì¹™ê³¼ì˜ ê´€ê³„
- [[03. Permanent Notes/Area/Junit5ì™€ TestContainerë¥¼ ì´ìš©í•œ ìƒëª…ì£¼ê¸° ê´€ë¦¬|Junit5ì™€ TestContainerë¥¼ ì´ìš©í•œ ìƒëª…ì£¼ê¸° ê´€ë¦¬]] - ì‹¤ì œ í™œìš© ì‚¬ë¡€

### ëŒ€ì•ˆ íŒ¨í„´
- [[ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´]] - í˜„ëŒ€ì  ëŒ€ì•ˆ
- [[íŒ©í† ë¦¬ íŒ¨í„´]] - ê°ì²´ ìƒì„± ëŒ€ì•ˆ
