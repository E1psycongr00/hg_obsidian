---
tags:
  - DataBase
  - Transaction
aliases:
  - Db Transaction
title: DB 트랜잭션
created: 2024-12-04T00:00:00.000Z
---
작성 날짜: 2024-12-04
작성 시간: 09:44


----
## 내용(Content)

### 트랜잭션

>[!summary]
>트랜잭션은 DB 상태 변화를 위한 작업 수행의 논리적 단위이다.

트랜잭션이란, DB 상태를 변경시키는 DML(SELECT, INSERT, UPDATE, DELETE)와 같은 쿼리 여러개를 하나로 묶어서 논리적인 단위로 작업을 수행하는 것이다. 그렇기에 Transaction을 모두 성공하면 DB에 **COMMIT**을 하고, 중간에 실패하면 논리적 컨텍스트로 묶은 쿼리들을 모두 **ROLL BACK** 한다.  ^e57d21

### 트랜잭션의 특징(ACID)

- **원자성(Atomicity)**: 트랜잭션에 포함된 모든 작업이 성공하거나 모두 실패해야 한다.
- **일관성(Consistency)**: 트랜잭션이 완료되면 데이터는 일관된 상태를 유지해야 한다.
- **격리성(Isolation)**: 트랜잭션 간 간섭이 없어야 한다.
- **지속성(Durablity)**: 트랜잭션이 성공적으로 완료되면 그 결과는 영구적으로 반영되어야 한다.

#### 원자성

DB 트랜잭션의 가장 핵심적인 기능으로 트랜잭션 내에서 실행한 작업들은 모두 하나의 작업인 것처럼 **모두 성공**하지 않으면 **모두 실패**한 것으로 간주한다. 즉, 여러 작업을 묶어 하나의 작업처럼 인식하는 것이다.

>[!help]- 원자성(Atomicity)의 의미?
>![[원자성 (draw).svg|400]]
>원자성은 어떤 것이 더 이상 쪼개질 수 없는 성질를 의미한다. 컴퓨터 과학에서는 이러한 원자성의 성질을 다음과 같이 해석한다.
>1. 작업의 완정성: 어떠한 작업이 완전하게 진행되거나 아예 실행되면 안됨
>2. 중단 불가능성: 원자성을 가지는 작업은 실행 중간에 멈추지 않음
>3. 동시성 제어: 여러 스레드가 공유 자원에 대해 작업할때 모든 쓰레드의 작업이 완전이 이루어져야 함.

#### 일관성

DB에서 정한 제약 조건을 반드시 지켜야 한다.

>[!example]
>계좌 잔액이 마이너스가 되면 안된다.

#### 격리성

동시에 실행되는 트랜잭션들이 서로 영향을 끼치면 안된다.

>[!example]
>동시에 여러 거래가 발생하더라도 각 거래는 서로 영향을 주지 않는다.


#### 지속성

트랜잭션이 커밋되면 각 결과는 DB에 영구적으로 저장되어야 한다.

>[!example]
>거래가 완료가 됬다면 거래가 성공을 했든 실패를 했든 거래 내역은 영구적으로 보존되어야 한다.

### 트랜잭션 예시

#### 송금

A와 B가 초기에 10,000씩 가지고 있다고 가정하자.

성공적인 송금 과정

1. A가 B에게 2,000원을 송금한다.
2. A의 계좌는 10,000 - 2,000 = 8,000이 된다.
3. B의 계좌는 10,000 + 2,000 = 12,000이 된다.

실패한 송금 과정

1. A가 B에게 2,000원 송금한다.
2. A의 계좌는 8,000원이 된다.
3. B의 계좌에서 오류 발생
4. 송금 전 상태로 롤백(A = 10,000, B = 10,000)

송금 작업은 두 계좌에 기록된 금액이 한 쪽은 감소하고 한 쪽은 증가가 모두 적용되야 하는 작업이다. 내부에서는 여러 작업으로 이루어져 있지만, 우리는 이 작업이 하나의 작업으로 인식되어야 한다.(원자화) 이런 경우 트랜잭션을 쓸 수 있다.



## 질문 & 확장

(없음)

## 출처(링크)

- [데이터베이스 트랜잭션 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98)
- [\[Database\] 트랜잭션이란? — 깊게 자라기](https://devjem.tistory.com/27#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%98%20%ED%8A%B9%EC%84%B1(ACID)-1)
- [트랜잭션이란? 특징과 사용법에 대해 쉽게 알아보자](https://hstory0208.tistory.com/entry/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%B4%EB%9E%80-%ED%8A%B9%EC%A7%95%EA%B3%BC-%EC%82%AC%EC%9A%A9%EB%B2%95%EC%97%90-%EB%8C%80%ED%95%B4-%EC%89%BD%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90)

## 연결 노트






