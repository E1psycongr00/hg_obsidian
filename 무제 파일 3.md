## 내용

### 주제 요약
Raft는 분산 시스템에서 합의(Consensus)를 이루기 위한 알고리즘으로, 이해와 구현이 용이하도록 설계되었다[^1]. Paxos 알고리즘의 복잡성을 개선하여 2013년 Diego Ongaro와 John Ousterhout에 의해 개발되었다.

### 핵심 구성 요소

1. **리더 선출 (Leader Election)**
   - 클러스터의 모든 노드는 Follower, Candidate, Leader 중 하나의 상태를 가진다[^2].
   - 리더 부재 시 Follower는 timeout 후 Candidate가 되어 선거를 시작한다.
   - 과반수 이상의 투표를 받은 Candidate가 Leader가 된다.

2. **로그 복제 (Log Replication)**
   - Leader는 클라이언트로부터 받은 모든 변경사항을 로그 항목으로 변환한다[^3].
   - 로그 항목은 다음 정보를 포함한다:
     ```
     {term: 현재 임기 번호, index: 로그 순서, command: 실행할 명령}
     ```
   - Leader는 Follower들에게 로그를 복제하고, 과반수 이상이 저장하면 commit한다.

3. **안전성 보장**
   - Election Safety: 한 term에 최대 하나의 리더만 선출된다.
   - Log Matching: 같은 index와 term을 가진 로그는 동일한 명령을 포함한다[^4].
   - Leader Completeness: 선출된 리더는 이전 term의 모든 커밋된 로그를 포함한다.

### 구현 예시
```python
class RaftNode:
    def __init__(self):
        self.state = 'FOLLOWER'
        self.current_term = 0
        self.voted_for = None
        self.log = []
        
    def start_election(self):
        self.state = 'CANDIDATE'
        self.current_term += 1
        self.voted_for = self.id
        # Request votes from other nodes
```

## 질문 & 확장

1. Raft와 Paxos 알고리즘의 주요 차이점은 무엇이며, 어떤 상황에서 각각을 선택해야 하는가?
2. 네트워크 파티션 상황에서 Raft는 어떻게 일관성을 유지하는가?
3. Raft의 성능을 최적화하기 위한 방법에는 어떤 것들이 있는가?
4. etcd, Consul과 같은 실제 시스템에서 Raft는 어떻게 구현되어 있는가?

## 출처

[^1]: Ongaro, D., & Ousterhout, J. (2014). "In Search of an Understandable Consensus Algorithm"
    > "Raft is a consensus algorithm that is designed to be easy to understand. It's equivalent to Paxos in fault-tolerance and performance."
    Raft 알고리즘의 기본 개념과 설계 목표를 설명하는 원본 논문으로, 알고리즘의 핵심 특징을 이해하는데 필수적인 자료이다.

[^2]: Howard, H. (2015). "ARC: Analysis of Raft Consensus"
    > "The state machine approach to consensus requires nodes to transition between well-defined states: Follower, Candidate, and Leader."
    Raft의 상태 전이와 리더 선출 과정의 이론적 기반을 제공한다.

[^3]: Ongaro, D. (2014). "Consensus: Bridging Theory and Practice"
    > "Log replication in Raft follows a simple pattern: the leader appends commands to its log and replicates these entries to followers."
    로그 복제 메커니즘의 상세한 구현 방법과 이론적 근거를 설명한다.

[^4]: Kleppmann, M. (2017). "Designing Data-Intensive Applications"
    > "The Log Matching Property ensures that if any two logs contain an entry with the same index and term, then the logs are identical in all entries up through the given index."
    Raft의 안전성 속성과 로그 일관성 보장 메커니즘을 설명하는데 참조되었다.