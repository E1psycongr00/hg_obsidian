작성 날짜: 2023-12-06
작성 시간: 14:33

## 주제: #미완

----
## 내용(Content)

### Http 요청하기
```js
import http from 'k6/http';

export default function () {
	http.get('http://test.k6.io');
}
```

get 요청은 간단히 url을 넣어주면 된다


```js
import http from 'k6/http';

export default function() {
    const url = 'http://test.k6.io/login';
    const payload = JSON.stringify({
        email: 'aaa',
        password: 'bbb',
    });
    
    const params = {
        headers: {
            'Content-Type': 'application/json',
        }
    };

    http.post(url, payload, params);
}
```

조금 더 복잡한 요청인데, params로 header 를 셋팅할 수 있고, payload를 넣어서 body를 만들어 줄 수 있다.

백틱을 이용하면 PathVariable의 정수 id도 쉽게 요청 가능하다
```js
import http from 'k6/http';

export default function () {
	for (let id = 1; id <= 100; id++) {
		http.get(http.url`http://example.com/posts/${id}`);
	}
}
```

### 테스트 검증하기 (Check)
k6는 요청 시 테스트를 검증할 수 있도록 check라는 함수를 제공한다

#### http status check 하기
```java
import http from "k6/http";
import { sleep } from "k6";

export default function () {
    const res = http.get("http://test.k6.io");
    check(res, {
        'body size is 11,105 bytes': (r) => r.body.length == 11105,
    });
}
```

#### 여러 가지를 검증하기

```js
import http from "k6/http";
import { check } from "k6";

export default function () {
    const res = http.get("http://test.k6.io/");
    check(res, {
        "is status 200": r => r.status === 200,
        "body size is 11,105 bytes": r => r.body.length == 11105,
    });
}
```

check 중괄호에 여러개의 람다 function을 넣어주면 된다.

## 질문 & 확장

(없음)

## 출처(링크)
- https://k6.io/docs/using-k6/http-requests/

## 연결 노트










