---
tags:
  - 클린코드
aliases:
---
작성 날짜: 2024-02-05
작성 시간: 21:55

#미완 #솔루션 #클린코드 

----

## 문제 & 원인

### 임시 변수를 통해 복잡해진 함수
#### 문제의 코드 해석하기
```js
// 사용자 정의 출력 형태로 변경
util.inspect = function (obj, options) {
    let result = "";
    if (Array.isArray(obj) && Array.isArray(obj[0])) {
        // 2차원 배열의 경우, 각 행을 [ ]로 묶어서 출력
        result += "이것은 2차원 배열\n";
        return (
            result +
            ("[" +
                obj.map(row => "[" + row.join(", ") + "]").join(",\n ") +
                "]")
        );
    }
    // 기존 inspect 메서드로 출력
    result += "이것은 일반 객체\n";
    return result + originalInspect(obj, options);
};
```

위와 같은 코드를 살펴보자. util.inspect 코드를 내가 의도한 코드처럼 쓰려고 한다. 사실 위 코드는 위험한 코드인데, 클린 코드 입장에서만 살펴보자. 

우선 위 코드를 해석하면 다음과 같다. inspect는 console.log()에서  객체를 나타내는데 쓰이는 함수이다. 위에서는 함수가 2차원일 때 줄바꿈해서 행렬 보 듯 출력하고, 나머지는 이전에 쓰이던 함수 그대로 쓰려고 한다. 

#### 문제의 코드가 가지는 위험성
- 코드에 여러 로직이 섞여있다. 
	- 2차원 배열 출력 로직이 들어 있다.
	- 나머지는 오리지널 출력 로직이 있다.
	- if문을 통해 어떤 로직들을 호출할지 관리하고 있다.
- 코드에 문제가 발생하면 해당 함수에서 해당 문제를 찾아야 하기 떄문에 디버깅이 어렵다.
- result라는 변수가 마치 함수 내에서 전역변수처럼 쓰이고 있다.
- 일부분에 로직이 변경되더라도  요구 사항이 생기면 매번 해당 함수를 디버깅하고 수정해야 한다.


## 해결 방안
>[!summary] 임시 변수 문제 해결법
>- 함수를 분리한다.
>- 고차함수를 이용한다.(map, filter 등등)

위 코드 문제는 함수가 너무 많은 책임 지는 것이다. 그래서 3개의 함수로 분리하자
1. 우리가 원하는 조건에 따른 호출 함수
2. 내부 로직을 함수로 분리

## 질문 & 확장

(없음)

## 출처(링크)


## 연결 노트


