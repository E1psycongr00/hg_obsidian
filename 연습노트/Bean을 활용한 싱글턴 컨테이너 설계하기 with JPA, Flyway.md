---
tags:
  - 미완
  - 솔루션
  - Gradle
aliases: 
date: 2024-11-20
title: Bean을 활용한 싱글턴 컨테이너 설계하기 with JPA, Flyway
---
작성 날짜: 2024-11-20
작성 시간: 21:24


----

## 문제 & 원인

테스트 컨테이너를 사용 시 고려해야 할 점이 있다.

1. 단순 인스턴스로 테스트 실행 시 매 테스트 매서드마다 컨테이너를 새로 생성한다.
2. static 으로 컨테이너를 생성해도 테스트 클래스가 많다면 병렬 실행 시 많은 컨테이너가 생성된다.
3. 테스트 상속을 활용해도 유동적으로 필요한 컨테이너를 생성하기 쉽지 않다.

공식 문서에 따르면 `@TestContainers`와 static의 경우 테스트 클래스만큼 life cycle을 가지고, static이 아닌 경우 테스트 메서드 케이스만큼 life cycle을 가진다고 한다. 1번의 경우 가장 안전한 테스트를 보장하지만, docker 컨테이너를 매번 생성하는 것은 테스트를 느리게 만들고 메모리가 터질 가능성이 있다.

편의성 측면에서도 문제가 있다. Abstract를 이용해서 컨테이너 틀을 구성하고, 상속해서 테스트를 구성하면 편리하게 테스트를 구성할 수 있다. 하지만, JAVA 언어의 경우 여러 개의 상

## 해결 방안


## 질문 & 확장

(없음)

## 출처(링크)


## 연결 노트
