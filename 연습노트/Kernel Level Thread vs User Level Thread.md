작성 날짜: 2023-12-17
작성 시간: 20:43

## 주제: #미완 #Thread 

----
## 내용(Content)
### 쓰레드 정의
Thread는 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위이다. 보통 하나의 프로그램에는 하나의 스레드를 가지지만, 경우에 따라 둘 이상의 스레드를 가지기도 한다. 이러한 방식을 Multi-Thread 방식이라고 한다.

### 사용자 레벨 스레드(User Level Thread)
사용자 레벨 스레드는 커널 영역의 상위에서 지원되며, 라이브러리를 통해 구현된다. 라이브러리는 스레드의 생성 및 스케줄링 관리 기능을 제공한다.

동일한 메모리 영역에서 스레드를 생성 및 스케줄링 등에 관한 관리 기능을 제공한다. 동일한 메모리 영역에서 스레드가 생성 및 관리되기 때문에 속도는 빠르지만, 여러 개의 사용자 스레드 중에 시스템 호출과 같은 이유로 하나가 중단되면, 나머지 모든 스레드도 중단된다. 이러한 이유는 커널이 프로세스 내부의 스레드를 인식하지 못하고, 해당 프로세스를 대기 상태로 전환하기 때문이다.


### 커널 레벨 스레드(Kernel Level Thread)
커널 스레드는 OS에서 지원하는 스레드 기능으로 구현된다. 커널이 스레드의 생성 및 스케줄링을 관리한다. 스레드가 시스템 호출로 중단되더라도, 커널은 프로세스 내의 다른 스레드를 중단시키지 않고 계속 실행시킨다. 그러나 사용자 스레드에 비해 느리다.

멀티 프로세싱 환경에서는 커널은 여러 개의 스레드를 각각 다른 프로세서에 할당할 수 있다.

### 스레드 모델
#### many-to-one
![[many-to-one-thread model(draw)|300]]

**특징**
많은 사용자 스레드가 하나의 커널 스레드를 활용함

**장점**
- 스레드 관리가 사용자 공간 라이브러리에서 행해지기 때문에 효율적이다.

**단점**
- 한 스레드가 시스템 콜에 의해 중단될 경우 전체 프로세스가 중단된다.
- 한번에 하나의 커널 스레드에 접근 가능하다.
	- 다중 스레드가 다중 코어 시스템에서 병렬 실행 X
	- 다중 코어의 이점을 살릴 수 없음
	- 현재 이 모델은 거의 사용되지 않음


#### one-to-one
![[one-to-one thread model(draw)]]

**특징**
각 사용자 스레드와 커널 스레드가 1:1로 연결됨. Linux, Window등 대부분의 운영체제에서 해당 모델을 사용한다.

**장점**
- 하나의 스레드가 중지되더라도 다른 스레드 실행 가능
- 다중 처리기에서 다중 스레드가 병렬로 수행되는 것을 허용

**단점**
- 사용자 스레드를 만들려면 커널 스레드를 생성해야함
- 커널 스레드는 생성/관리가 무겁기 때문에 시스템 성능에 부담이 간다
#### many-to-many
![[many-to-many thread model(draw)]]

**특징**
여러 개의 사용자 스레드를 그보다 적은 수 또는 같은 수의 Kernel Thread와 함께 다양한 작업을 효과적으로 관리하고 분배한다. 

Kernel Thread의 수는 응용 프로그램이나 머신의 사양에 따라 결정된다.
ex) 응용 프로그램은 4개의 코어 시스템보다 8개의 코어 시스템에서 더 많은 Kernel Thread를 할당 받을 수 있음.

**장점**
- 개발자는 필요한 만큼 사용자 수준 스레드를 생성가능하고 스레드를 병렬로 실행 가능함
- 스레드가 시스템 호출에 의해 멈추더라도 커널이 다른 스레드 수행을 스케줄링 가능하다

**단점**
- 구현 난이도가 높다

### User Level Thread 와 Kernel Level Thread 비교
|                   | User Level Thread                        | Kernel Level Thread               |
| ----------------- | ---------------------------------------- | --------------------------------- |
| ULT : NLT         | N : 1                                    | 1:1                               |
| 오버헤드          | 적음                                     | 큼                                |
| 시스템 블록시     | 모든 스레드 중단                         | 다른 프로세스 내 스레드 실행 가능 |
| 스케줄링 우선순위 | 없음                                     | 있음                              |
| 스레드 생성 비용  | 낮음                                     | 높음                              |
| 정보 관리         | 프로세스 내에서 TCB, Kernel에서 PCB 관리 | 커널이 TCB, PCB 모두 관리         |

## 질문 & 확장

(없음)

## 출처(링크)
- https://kspsd.tistory.com/50
- https://velog.io/@khsb2012/go-goroutine#%EA%B3%A0%EB%A3%A8%ED%8B%B4%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%8B%A4%ED%96%89%EB%90%A0%EA%B9%8C
- https://howudong.tistory.com/268
## 연결 노트










