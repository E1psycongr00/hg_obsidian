---
tags:
  - 미완
  - JAVA
  - Spring
aliases: 
date: 2024-10-26
title: 프론트 컨트롤러 패턴
---
작성 날짜: 2024-10-26
작성 시간: 23:57


----
## 내용(Content)

### 프론트 컨트롤러 패턴

>[!summary]
>여러 컨트롤러마다 각각의 서블릿을 설정하고 작업하던 반복적인 작업들을 앞에 하나의 FrontController를 두어서 이를 개선한 패턴

![[프론트 컨트롤러 도입 전 (draw).svg|프론트 컨트롤러 도입 전]]

![[프론트 컨트롤러 도입 후 (draw).svg|프론트컨트롤러 도입 후]]

프론트 컨트롤러 도입 후에 공통 Servlet 로직을 한 곳에서 처리하고 컨트롤러는 컨트롤러에만 집중하면 된다.

### 프론트 컨트롤러 예시

예시의 편의성을 위해 프론트 컨트롤러는 구현했지만 일부만 구현되고, 불필요한 Servlet 로직을 컨트롤러에 포함하도록 한 것과 완전히 분리해서 frontController에서 처리하게 하는 것을 비교해보자.

#### 구현 덜 된 프론트 컨트롤러 예시

```java
public class MemberFormController implements ControllerVersion1 {

    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}

```

```java
public class MemberSaveController implements ControllerVersion1 {

    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        request.setAttribute("member", member);

        String viewPath = "/WEB-INF/views/save-result.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```

MemberFormController를 보면 직접 jsp 코드에 접근하고 requestDispatcher를 통해 직접 request, response를 처리함을 알 수 있다.

```java
@WebServlet(name = "frontController", urlPatterns = "/front-controller/v1/*")
public class FrontControllerServlet extends HttpServlet {
    
    private Map<String, ControllerVersion1> controllerMap = new HashMap<>();

    public FrontControllerServlet() {
        controllerMap.put("/front-controller/v1/members/new-form", new MemberFormController());
        controllerMap.put("/front-controller/v1/members/save", new MemberSaveController());
    }

    @Override
    public void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("FrontControllerServlet.service");

        // front-controller/v1/members
        String requestURI = request.getRequestURI();

        ControllerVersion1 controller = controllerMap.get(requestURI);
        if (controller == null) {
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);
            return;
        }

        controller.process(request, response);
    }
}
```

getRequestURI에서는 URL의 Path부분만 반환하고 도메인 및 포트는 반환하지 않는다.

>[!example]
>URL, URI 모두 쿼리스트링(파라미터)는 제외해서 출력한다. `&`뒤에 있는 것
> - URL: `https://www.naver.com/health/check/1`  
> - URI: `/health/check/1`

위의 코드들을 보면 controller는 request, resposne가 에 의존하고 있고, view를 직접 생성하고 있다. 일부로 맵핑만 FrontController에서 하고, 나머지는 Controller 

## 질문 & 확장

(없음)

## 출처(링크)

- https://twojun-space.tistory.com/172
- https://kgvovc.tistory.com/31

## 연결 노트

- [[WebServlet 어노테이션|@WebServlet]]








