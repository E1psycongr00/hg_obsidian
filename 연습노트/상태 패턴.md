---
tags:
  - 미완
  - 객체지향
  - 디자인패턴
  - JAVA
aliases: 
date: 2024-12-05
title: 상태 패턴
---
작성 날짜: 2024-12-05
작성 시간: 19:16


----
## 내용(Content)

### 상태 패턴

>[!summary]
>복잡한 상태 별 동작을 분리해서 사용하는 패턴

프로그램을 하다 보면 객체가 상태에 따라 동작을 하고, 상태 별 동작 전이가 복잡한 경우가 있다. 예를 들어 엘리베이터를 생각해보자.

엘리베이터는 5가지 State에 따라 다르게 동작한다.
- UP_MOVING
- DOWN_MOVING
- WAIT
- UP_WAIT
- DOWN_WAIT


거기에 따른 Event(입력)을 정의해보자

- OUT_UP_PRESS
- OUT_DOWN_PRESS
- IN_FLOOR_PRESS

유한 오토 마타에 따르면 위와 같은 상태, 이벤트 모델은 5 x 3 = 15 가지 종류의 분기와 상태 업데이트가 있을 수 있다. 이렇게 상태가 복잡한 경우에는 switch나 if문으로는 한계가 있고, 상태 자체가 하나의 action을 가지고 다음 상태로 전이하는 형태의 패턴이 효과적이다. 이것이 상태 패턴이다.

### 상태 패턴 구현

안쪽으로 열리는 문을 예로 들어 보자

OPEN, CLOSE 2개의 상태가 있고, PUSH , PULL 이벤트가 있다고 가정하자.

단순 분기문을 이용한 구현

```java
public InnerDoor {
	public enum DoorState {
		OPEN, CLOSE
	}

	private DoorState state;

	// event: push
	public void push() {
		switch (state) {
			case DoorState.OPEN -> {
				close();
				state = DoorState.CLOSE;
			}
			case DoorState.CLOSE -> {
				notWork();
				state = DoorState.CLOSE;
			}
		}
	}

	// event: pull
	public void pull() {
		switch (state) {
			case DoorState.OPEN -> {
				notWork();
				state = DoorState.OPEN;
			}
			case DoorState.CLOSE -> {
				open();
				state = DoorState.OPEN;
			}
		}
	}
}

```

지금은 간단할 수도 있지만 코드가 복잡해지면 이 것은 해결하기 힘들 수 있다.





## 질문 & 확장

(없음)

## 출처(링크)


## 연결 노트










